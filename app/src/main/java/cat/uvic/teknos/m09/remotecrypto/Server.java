/*
 * This Java source file was generated by the Gradle 'init' task.
 */
package cat.uvic.teknos.m09.remotecrypto;

import java.io.*;
import java.net.ServerSocket;
import java.util.Base64;
import java.util.Scanner;

public class Server {
    public static final int PORT = 50001;

    public static void main(String[] args) throws IOException {

        var server = new ServerSocket(PORT);
        System.out.println("Server listening on port" + server.getLocalPort());

        var client = server.accept();

        var outputStream = new PrintWriter(client.getOutputStream());

        outputStream.println("Type text to encode in base64 otherwise press enter");
        outputStream.flush();

        var inputStream = new BufferedReader(new InputStreamReader( client.getInputStream()));

        var data = inputStream.readLine();

        var encoder = Base64.getEncoder();

        while (!data.equals("")){
            outputStream.println(encoder.encodeToString(data.getBytes()));
            outputStream.flush();
            outputStream.println("Type text to encode in base64 otherwise press enter");
            outputStream.flush();
            data = inputStream.readLine();

        }
        client.close();

    }


}
