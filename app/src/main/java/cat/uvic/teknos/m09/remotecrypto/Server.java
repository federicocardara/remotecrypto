/*
 * This Java source file was generated by the Gradle 'init' task.
 */
package cat.uvic.teknos.m09.remotecrypto;

import java.io.*;
import java.net.ServerSocket;
import java.util.Base64;

public class Server {
    private static final int SERVER_SOURCE_PORT=50001;
    public String getGreeting() {
        return "Hello World!";
    }

    public static void main(String[] args) throws IOException {
        var serverSocket=new ServerSocket(SERVER_SOURCE_PORT);
        System.out.println(serverSocket.getLocalPort());

        var newServerSocketFromClientSocketConnectionToServerSocket=serverSocket.accept();
        System.out.println("breakpoint");

        var input=new BufferedReader(new InputStreamReader(newServerSocketFromClientSocketConnectionToServerSocket.getInputStream()));
        var output=new PrintWriter(newServerSocketFromClientSocketConnectionToServerSocket.getOutputStream());

        var data=input.readLine();

        var encoder= Base64.getEncoder();

        output.println(encoder.encodeToString(data.getBytes()));
        output.flush();
        
        newServerSocketFromClientSocketConnectionToServerSocket.close();

    }
}
